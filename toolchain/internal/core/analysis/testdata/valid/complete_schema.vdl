// A complete valid schema with all element types

""" API Documentation """

const API_VERSION = "1.0.0"
const MAX_PAGE_SIZE = 100
const TAX_RATE = 0.21
const FEATURE_ENABLED = true

enum OrderStatus {
	Pending
	Processing
	Shipped
	Delivered
	Cancelled
}

enum Priority {
	Low = 1
	Medium = 2
	High = 3
}

pattern UserEventSubject = "events.users.{userId}.{eventType}"
pattern SessionCacheKey = "cache:session:{sessionId}"

type AuditMetadata {
	id: string
	createdAt: datetime
	updatedAt: datetime
}

type User {
	...AuditMetadata
	name: string
	email?: string
	status: OrderStatus
	priority: Priority
}

type Product {
	...AuditMetadata
	name: string
	price: float
	tags: string[]
	metadata: map<string>
}

rpc Catalog {
	""" Product operations """

	proc GetProduct {
		input {
			id: string
		}
		output {
			product: Product
		}
	}

	proc ListProducts {
		input {
			page: int
			limit: int
		}
		output {
			items: Product[]
			total: int
		}
	}

	stream ProductUpdates {
		input {
			productId: string
		}
		output {
			event: string
			product: Product
		}
	}
}
